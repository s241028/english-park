<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Park</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- オープニング画面 -->
    <div id="splash-screen" class="screen active">
        <div class="splash-logo">🌳</div>
        <h1>English Park</h1>
        <p>Welcome to your English learning journey!</p>
        <button id="enter-app-button" class="action-button">スタート</button>
    </div>

    <!-- 説明用モーダルウィンドウ -->
    <div id="info-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2 id="modal-title">機能タイトル</h2>
            <p id="modal-description">ここに機能の詳細説明が表示されます。</p>
        </div>
    </div>

    <!-- ホーム画面 -->
    <main id="home-screen" class="screen">
        <div class="container">
            <h1>English Park 🌳</h1>
            <p class="description">ミニゲームを選んで英語を楽しく学ぼう！</p>
            
            <div id="idiom-of-the-day-card" class="card idiom-card">
                <div class="card-header">
                    <h2>💡 今日のイディオム</h2>
                    <span id="idiom-date" class="date-display"></span>
                </div>
                <h3 id="idiom-phrase">Loading...</h3>
                <p><strong>意味:</strong> <span id="idiom-meaning"></span></p>
                <p id="idiom-description" class="sentence-meaning"></p>
            </div>

            <div class="game-selection">
                <div class="game-card" id="start-speaking-practice">
                    <button class="info-btn" data-feature="speaking">i</button>
                    <div class="game-icon">🗣️</div>
                    <h3>スピーキング練習</h3>
                    <p>発音、リズム、ペースを総合的に練習します。</p>
                </div>
                <div class="game-card" id="go-to-quiz-levels">
                    <button class="info-btn" data-feature="wordquiz">i</button>
                    <div class="game-icon">✍️</div>
                    <h3>単語クイズ</h3>
                    <p>4つのレベルで語彙力をテストしよう。</p>
                </div>
                <div class="game-card" id="start-listening-challenge">
                    <button class="info-btn" data-feature="listening">i</button>
                    <div class="game-icon">🎧</div>
                    <h3>リスニングチャレンジ</h3>
                    <p>英語の音声を聞き取って書き起こしてみよう。</p>
                </div>
                 <div class="game-card" id="start-reading-quiz">
                    <button class="info-btn" data-feature="reading">i</button>
                    <div class="game-icon">📚</div>
                    <h3>読解練習</h3>
                    <p>短い英文を読み、内容に関するクイズに挑戦しよう。</p>
                </div>
                <!-- ▼▼▼ 復活: Industry Focus ▼▼▼ -->
                <div class="game-card" id="start-industry-focus">
                    <button class="info-btn" data-feature="industry">i</button>
                    <div class="game-icon">🚀</div>
                    <h3>専門分野別英語</h3>
                    <p>IT、ビジネス、医療などの専門用語を学びます。</p>
                </div>
                <!-- ▲▲▲ 復活ここまで ▲▲▲ -->
                <div class="game-card" id="start-video-chat">
                    <button class="info-btn" data-feature="videochat">i</button>
                    <div class="game-icon">📹</div>
                    <h3>ビデオチャット</h3>
                    <p>お題について英語でフリートークしよう。</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Industry Focus: 業界選択画面 -->
    <main id="industry-selection-screen" class="screen">
        <div class="container">
            <button id="backButtonFromIndustry" class="back-button">🏠 ホームに戻る</button>
            <h1>専門分野を選択 🚀</h1>
            <p class="description">学習したい業界を選んでください。</p>
            <div class="level-selection-grid">
                <div class="level-card" onclick="selectIndustry('it')">
                    <div class="game-icon">💻</div>
                    <h3>IT & Tech</h3>
                    <p>テクノロジー・開発</p>
                </div>
                <div class="level-card" onclick="selectIndustry('business')">
                    <div class="game-icon">💼</div>
                    <h3>Business</h3>
                    <p>経営・マネジメント</p>
                </div>
                <div class="level-card" onclick="selectIndustry('medical')">
                    <div class="game-icon">🩺</div>
                    <h3>Medical</h3>
                    <p>医療・科学</p>
                </div>
                <div class="level-card" onclick="selectIndustry('finance')">
                    <div class="game-icon">⚖️</div>
                    <h3>Finance</h3>
                    <p>金融・法律</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Industry Focus: モード選択画面 -->
    <main id="industry-module-screen" class="screen">
        <div class="container">
            <button id="backButtonFromModule" class="back-button">📜 分野選択に戻る</button>
            <h1 id="industry-title-display">Industry Title</h1>
            <p class="description">学習モードを選んでください。</p>
            <div class="game-selection">
                <div class="game-card" onclick="startIndustryModule('flashcards')">
                    <div class="game-icon">🃏</div>
                    <h3>フラッシュカード</h3>
                    <p>重要単語を効率よく暗記します。</p>
                </div>
                <div class="game-card" onclick="startIndustryModule('phrases')">
                    <div class="game-icon">💬</div>
                    <h3>キーフレーズ</h3>
                    <p>実践的なフレーズを文脈で学びます。</p>
                </div>
                <div class="game-card" onclick="startIndustryModule('articles')">
                    <div class="game-icon">📰</div>
                    <h3>ミニ記事読解</h3>
                    <p>短い業界ニュースで読解力を鍛えます。</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Industry Focus: フラッシュカード画面 -->
    <main id="industry-flashcard-screen" class="screen">
        <div class="container">
            <button id="backButtonFromIndFlashcard" class="back-button">↩ モード選択に戻る</button>
            <h1 id="ind-flashcard-header">Flashcards</h1>
            
            <div class="card-container perspective-1000 h-80 w-full mb-8 cursor-pointer" onclick="flipIndCard()">
                <div id="ind-flashcard-inner" class="card-inner relative w-full h-full shadow-xl rounded-2xl transition-transform duration-500">
                    <!-- 表面 -->
                    <div class="card-front absolute w-full h-full bg-white rounded-2xl border-2 border-neon-cyan flex flex-col items-center justify-center p-8 backface-hidden">
                        <span class="text-sm font-bold text-gray-400 uppercase tracking-widest mb-4">Term</span>
                        <p id="ind-card-front" class="text-4xl font-bold text-primary-text text-center"></p>
                        <p class="text-xs text-gray-400 mt-8 absolute bottom-6">Tap to flip ↻</p>
                    </div>
                    <!-- 裏面 -->
                    <div class="card-back absolute w-full h-full bg-f0f9ff rounded-2xl border-2 border-neon-magenta flex flex-col items-center justify-center p-8 backface-hidden rotate-y-180">
                        <span class="text-sm font-bold text-gray-400 uppercase tracking-widest mb-2">Meaning</span>
                        <p id="ind-card-back-meaning" class="text-2xl font-bold text-neon-cyan mb-4 text-center"></p>
                        <div class="w-full border-t border-gray-200 pt-4 mt-2">
                            <p id="ind-card-back-sentence" class="text-light-text italic text-center text-sm leading-relaxed"></p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="controls">
                <button onclick="prevIndCard()" class="action-button">&larr; Prev</button>
                <span id="ind-card-progress" class="text-lg font-bold mx-4">1 / 10</span>
                <button onclick="nextIndCard()" class="action-button primary">Next &rarr;</button>
            </div>
        </div>
    </main>

    <!-- Industry Focus: キーフレーズ画面 -->
    <main id="industry-phrase-screen" class="screen">
        <div class="container">
            <button id="backButtonFromIndPhrase" class="back-button">↩ モード選択に戻る</button>
            <h1 id="ind-phrase-header">Key Phrases</h1>

            <div class="card">
                <div class="card-header">
                    <h2 class="text-sm text-gray-400">SCENARIO</h2>
                </div>
                <p id="ind-phrase-scenario" class="text-lg mb-2"></p>
                <p id="ind-scenario-trans" class="text-sm text-gray-500 hidden"></p>
                
                <div class="mt-6">
                    <p class="text-sm text-neon-cyan font-bold mb-2">KEY PHRASE</p>
                    <p id="ind-phrase-text" class="text-2xl font-bold text-primary-text"></p>
                </div>

                <div id="ind-phrase-trans-container" class="hidden mt-4 pt-4 border-t border-gray-200">
                    <p class="text-sm text-gray-400">MEANING</p>
                    <p id="ind-phrase-trans" class="text-xl font-bold text-neon-green"></p>
                </div>
            </div>

            <div class="controls">
                <button onclick="toggleIndPhraseTrans()" class="action-button">訳を表示/非表示</button>
                <button onclick="nextIndPhrase()" class="action-button primary">次のフレーズ &rarr;</button>
            </div>
             <div class="text-center mt-4 text-gray-400">
                <span id="ind-phrase-progress">1 / 5</span>
            </div>
        </div>
    </main>

    <!-- Industry Focus: ミニ記事画面 -->
    <main id="industry-article-screen" class="screen">
        <div class="container">
            <button id="backButtonFromIndArticle" class="back-button">↩ モード選択に戻る</button>
            <h1 id="ind-article-header">Mini Articles</h1>

            <div class="card reading-passage-card">
                <h2 id="ind-article-title"></h2>
                <p id="ind-article-content"></p>
                <div class="mt-4 text-right text-xs text-gray-400 italic">Source: <span id="ind-article-source"></span></div>
                
                <div id="ind-article-trans-container" class="hidden mt-6 pt-6 border-t border-gray-200 bg-gray-50 p-4 rounded">
                    <h3 class="text-sm font-bold text-gray-500 mb-2">日本語訳</h3>
                    <p id="ind-article-trans" class="text-sm text-gray-700"></p>
                </div>
            </div>

            <div class="controls">
                <button onclick="toggleIndArticleTrans()" class="action-button">翻訳を確認</button>
                <button onclick="nextIndArticle()" class="action-button primary">次の記事 &rarr;</button>
            </div>
            <div class="text-center mt-4 text-gray-400">
                <span id="ind-article-progress">1 / 3</span>
            </div>
        </div>
    </main>

    <!-- スピーキング練習画面 -->
    <main id="speaking-practice-screen" class="screen">
        <div class="container">
            <button id="backButtonSpeaking" class="back-button">🏠 ホームに戻る</button>
            <h1>スピーキング練習 🗣️</h1>
            <p class="description">お手本を聞いてから、マイクに向かって発音してみましょう。発音の正確さ、ペース、聞き比べができます。</p>
            <div class="card">
                <div class="card-header">
                    <h2>お題</h2>
                    <button id="nextButton">次のお題へ 🔄</button>
                </div>
                <p id="sentence"></p>
                <p id="sentence-meaning" class="sentence-meaning"></p>
            </div>
            <div class="controls">
                <button id="listenButton" class="listen-btn">お手本を聞く 🎧</button>
                <button id="startButton">録音開始 🎙️</button>
                <button id="stopButton" disabled>録音停止 ⏹️</button>
            </div>
            <div id="status" class="status"></div>
            <div class="result-container">
                <div class="card card-score"><h2>スコア</h2><p id="score">0 <span class="score-unit">/ 100</span></p></div>
                <div class="card">
                    <h2>あなたの録音</h2>
                    <audio id="user-recording-player" controls class="user-audio-player"></audio>
                </div>
                <div class="card feedback-card"><h2>フィードバック</h2><p id="feedback">-</p></div>
            </div>
        </div>
    </main>

    <!-- クイズレベル選択画面 -->
    <main id="quiz-level-screen" class="screen">
        <div class="container">
            <button id="backButtonFromLevels" class="back-button">🏠 ホームに戻る</button>
            <h1>単語クイズ ✍️</h1>
            <p class="description">挑戦するレベルを選んでください。</p>
            <div class="level-selection-grid">
                <div class="level-card" data-level="beginner">
                    <h3>初級編</h3>
                    <p>英検3級レベル</p>
                </div>
                <div class="level-card" data-level="intermediate">
                    <h3>中級編</h3>
                    <p>英検準2級・2級レベル</p>
                </div>
                <div class="level-card" data-level="advanced">
                    <h3>上級編</h3>
                    <p>英検準1級レベル</p>
                </div>
                <div class="level-card" data-level="expert">
                    <h3>最上級編</h3>
                    <p>英検1級・TOEIC 800+</p>
                </div>
            </div>
        </div>
    </main>

    <!-- 単語クイズ画面 -->
    <main id="word-quiz-screen" class="screen">
        <div class="container">
            <button id="backButtonFromQuiz" class="back-button">📜 レベル選択に戻る</button>
            <h1>単語クイズ ✍️</h1>
            <div id="quiz-game-area">
                <div class="card quiz-card">
                    <div id="quiz-hud"><span id="quiz-question-counter"></span><span id="quiz-score"></span></div>
                    <p id="quiz-question"></p>
                    <div id="quiz-options" class="quiz-options-grid"></div>
                    <div id="quiz-feedback"></div>
                </div>
            </div>
            <div id="quiz-end-screen" class="card" style="display: none;">
                <h2>クイズ終了！</h2>
                <p class="final-score-text">あなたの最終スコアは...</p>
                <p id="quiz-final-score"></p>
                <button id="quiz-restart-button" class="restart-button">もう一度挑戦する</button>
            </div>
        </div>
    </main>

    <!-- リスニングチャレンジ画面 -->
    <main id="listening-challenge-screen" class="screen">
        <div class="container">
            <button id="backButtonFromListening" class="back-button">🏠 ホームに戻る</button>
            <h1>リスニングチャレンジ 🎧</h1>
            <p class="description">再生ボタンを押して英語の音声を聞き、下のボックスに書き起こしてください。</p>
            <div id="listening-game-area">
                <div class="card listening-card">
                    <div class="listening-controls">
                        <button id="play-audio-button" class="play-audio-btn">音声を再生 ▶️</button>
                        <p id="listening-status" class="status"></p>
                    </div>
                    <textarea id="listening-input" class="listening-textarea" placeholder="ここに聞き取った英文を入力..." rows="3"></textarea>
                    <button id="submit-listening-button" class="submit-btn">答え合わせ</button>
                </div>
                <div id="listening-feedback-area" class="card" style="display: none;">
                    <h2 id="listening-result-title">結果</h2>
                    <p id="listening-feedback-text"></p>
                    <p><strong>正解:</strong> <span id="listening-correct-answer"></span></p>
                    <button id="next-listening-button" class="next-btn">次の問題へ 🔄</button>
                </div>
            </div>
        </div>
    </main>

    <!-- 読解練習画面 -->
    <main id="reading-quiz-screen" class="screen">
        <div class="container">
            <button id="backButtonFromReading" class="back-button">🏠 ホームに戻る</button>
            <h1>読解練習 📚</h1>
            <div id="reading-game-area">
                <div class="card reading-passage-card">
                    <h2 id="reading-title"></h2>
                    <p id="reading-passage"></p>
                </div>
                <div class="card quiz-card">
                    <div id="reading-hud"><span id="reading-question-counter"></span><span id="reading-score"></span></div>
                    <p id="reading-question"></p>
                    <div id="reading-options" class="quiz-options-grid"></div>
                    <div id="reading-feedback"></div>
                </div>
            </div>
            <div id="reading-end-screen" class="card" style="display: none;">
                <h2>読解クイズ終了！</h2>
                <p class="final-score-text">あなたの最終スコアは...</p>
                <p id="reading-final-score"></p>
                
                <div class="reading-review-area card">
                    <h3>本文と日本語訳</h3>
                    <div class="review-content">
                        <div class="review-section">
                            <h4>English</h4>
                            <p id="review-passage-en"></p>
                        </div>
                        <div class="review-section">
                            <h4>日本語</h4>
                            <p id="review-passage-ja"></p>
                        </div>
                    </div>
                </div>
                <button id="reading-restart-button" class="restart-button">別の文章に挑戦する</button>
            </div>
        </div>
    </main>

    <!-- ビデオチャット画面 (映像あり) -->
    <main id="video-chat-screen" class="screen">
        <div class="container">
            <button id="backButtonFromVideo" class="back-button">🏠 ホームに戻る</button>
            <h1>ビデオチャット 💬</h1>
            <div id="video-topic-card" class="card">
                <h2>Conversation Topic</h2>
                <p id="video-topic">What is the most interesting place you have ever visited?</p>
            </div>
            
            <!-- 映像表示エリア -->
            <div class="video-container">
                <video id="remote-video" autoplay playsinline></video>
                <div class="local-video-wrapper">
                    <video id="local-video" autoplay muted playsinline></video>
                </div>
            </div>

            <div id="video-controls">
                <button id="start-call-btn">Start Call</button>
                <button id="end-call-btn" disabled>End Call</button>
            </div>
            <div id="video-status" class="status"></div>
        </div>
    </main>

    <script src="script.js"></script>
</body>
</html>